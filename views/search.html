{% extends 'layouts/base.html' %}

{% block main %}
  <form action="/search" method="get">
    <div class="input-group">
      <input type="text" class="form-control" placeholder="Query" name="q" label="Search" value="{{ query }}">
      <span class="input-group-btn">
        <button type="submit" class="btn btn-primary">Search</button>
      </span>
    </div>
    {% for location in locations %}
      {% if loop.first %}<select name="location">{% endif %}
        <option
          value="{{ location.name }}"
          {% if filters.location == location.name %}selected{% endif %}
          >
          {{ location.name }}
        </option>
      {% if loop.last %}</select>{% endif %}
    {% endfor %}
  </form>
  {% if trials %}
  <section class="search-results">
    <h1>Results</h1>
    Found {{ trials.total_count }} trials.
    <nav>
      {% include "partials/search-pagination.html" %}
    </nav>

    {% for trial in trials.items %}
      {% if loop.first %}<ol>{% endif %}
      <li>
        {% include "partials/trial-search-result.html" %}
      </li>
      {% if loop.last %}</ol>{% endif %}
    {% endfor %}

    <nav>
      {% include "partials/search-pagination.html" %}
    </nav>
  {% endif %}
  </section>
{% endblock %}
